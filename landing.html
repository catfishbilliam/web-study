<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Information Evaluation Study — Survey</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <h1>Part 1: Survey</h1>
    <p class="muted">
      Please complete the brief survey below. When finished, click “Continue to Part 2” to complete the browsing task.
    </p>

    <!-- Embedded Google Form (prefilled with PROLIFIC_PID when present) -->
    <iframe id="surveyFrame" class="form-frame" loading="lazy" title="Survey"></iframe>

    <div style="text-align:center; margin-top:20px;">
      <button id="continueBtn" class="btn primary">Continue to Part 2</button>
    </div>
  </div>

  <script>
    // Read Prolific params
    const qs = new URLSearchParams(location.search);
    const PID = qs.get("PROLIFIC_PID") || "";
    const STUDY_ID = qs.get("STUDY_ID") || "";
    const SESSION_ID = qs.get("SESSION_ID") || "";

    // Prefill your Google Form (embedded) with PID only if present
    const FORM_BASE = "https://docs.google.com/forms/d/e/1FAIpQLSfZSotW8pdpndlmkS53GGLxMPHwUCod10xghOydO30xXmwHHA/viewform";
    const ENTRY_ID_FOR_PID = "entry.66279277"; // your PID field
    const formUrl = PID
      ? `${FORM_BASE}?embedded=true&usp=pp_url&${ENTRY_ID_FOR_PID}=${encodeURIComponent(PID)}`
      : `${FORM_BASE}?embedded=true`;
    document.getElementById("surveyFrame").src = formUrl;

    // Continue to Part 2 (task.html), passing through known params
    document.getElementById("continueBtn").addEventListener("click", () => {
      const url = new URL("task.html", location.href);
      if (PID) url.searchParams.set("PROLIFIC_PID", PID);
      if (STUDY_ID) url.searchParams.set("STUDY_ID", STUDY_ID);
      if (SESSION_ID) url.searchParams.set("SESSION_ID", SESSION_ID);
      location.href = url.toString();
    });
  </script>
</body>
</html>